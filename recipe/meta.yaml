{% set version = "1.1.2" %}

package:
  name: sixs
  version: {{ version }}

source:
  url: https://github.com/robintw/6S/archive/refs/tags/v{{ version }}.tar.gz
  sha256: ab92945fc5119053cb68bea86e71ad8908819876d0b8269d9b16d5fb4b63b941
  patches:
      - no_ffpe-summary.patch  # [osx]

build:
  number: 2

requirements:
  build:
    - cmake
    - {{ compiler('fortran') }}        # [unix]
    - {{ compiler('m2w64_fortran') }}  # [win]
    - {{ compiler('c') }}              # [unix]
    - {{ compiler('cxx') }}            # [unix]
    - {{ compiler('m2w64_c') }}        # [win]
  run:
    - m2w64-gcc-libgfortran  # [win]

test:
  files:
  - Example_In_1.txt
  - Example_In_3.txt

about:
  home: https://bitbucket.org/petebunting/6s
  summary: A basic RT code used for atmospheric correction & atmospheric
    simulations
  license: MIT
  # https://bitbucket.org/petebunting/6s/issues/1/no-license-information-and-no-license-file
  # license_file: 
  license_family: MIT
  description:  |
    The 6S code is a basic RT code used for calculation of lookup
    tables in the MODIS atmospheric correction algorithm.
    It enables accurate simulations of satellite and plane observation,
    accounting for elevated targets, use of anisotropic and lambertian surfaces
    and calculation of gaseous absorption. 6S website is http://6s.ltdri.org.

extra:
  recipe-maintainers:
    - robintw
    - danclewley
